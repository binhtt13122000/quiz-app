drop database Lab2
create database Lab2
go
use Lab2
go

create table TblRole (
	id int primary key,
	roleName varchar(20) not null
)

create table TblUser (
	email varchar(50) primary key,
	name nvarchar(MAX) not null,
	password nvarchar(MAX) not null,
	status bit default 1,
	roleId int foreign key references TblRole(id),
)

create table TblSubject (
	id varchar(50) primary key not null,
	name nvarchar(MAX) not null,
	timeToTakeQuiz int not null check(timeToTakeQuiz > 0),
	totalOfQuestionsPerQuiz int not null check (totalOfQuestionsPerQuiz > 0),
	pointPerQuestion float not null,
	status bit default 1
)

create table TblQuestion (
	id varchar(50) primary key not null,
	question_content nvarchar(MAX) not null,
	status bit default 1,
	subID varchar (50) foreign key references TblSubject(id)
)

create table tblAnswerOfQuestion (
    id varchar(50) primary key not null,
    answer_content nvarchar(MAX) not null,
    isCorrect bit default 0,
    questionId varchar(50) foreign key references TblQuestion(id)
)

create table TblQuiz (
	id varchar(50) primary key not null,
	userId varchar(50) foreign key references TblUser(email),
	subjectId varchar(50) foreign key references TblSubject(id),
	startTime datetime not null,
	endTime datetime not null,
	point int check (point >= 0 and point <= 100),
)

alter table TblQuiz
add isSubmit bit
create table TblAnswer (
	id varchar(50) primary key,
	quizId varchar(50) foreign key references TblQuiz(id),
	questionId varchar(50) foreign key references TblQuestion(id),
	isCorrect bit not null,
	choice varchar(50) foreign key references tblAnswerOfQuestion(id),
)

insert TblRole(id, roleName) values (1, 'STUDENT'), (2, 'ADMIN')
insert TblSubject(id, name, status, timeToTakeQuiz, totalOfQuestionsPerQuiz, pointPerQuestion)
values ('PRJ321', 'Java Web', 1, 20, 10, 10),
		('PRJ311', 'Java Desktop', 1, 10, 10, 10),
		('PRN292', 'C#.NET', 1, 10, 5, 20)

insert TblQuestion(id, question_content, status, subId)
values('PRJ321_Question_1', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_2', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_3', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_4', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_5', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_6', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_7', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_8', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_9', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_10', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_11', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_12', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_13', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_14', '1 + 1 = ', 1, 'PRJ321'),
('PRJ321_Question_15', '1 + 1 = ', 1, 'PRJ321'),
('PRJ311_Question_1', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_2', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_3', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_4', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_5', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_6', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_7', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_8', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_9', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_10', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_11', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_12', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_13', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_14', '1 + 1 = ', 1, 'PRJ311'),
('PRJ311_Question_15', '1 + 1 = ', 1, 'PRJ311'),
('PRN292_Question_1', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_2', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_3', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_4', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_5', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_6', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_7', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_8', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_9', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_10', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_11', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_12', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_13', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_14', '1 + 1 = ', 1, 'PRN292'),
('PRN292_Question_15', '1 + 1 = ', 1, 'PRN292')


insert into tblAnswerOfQuestion(id, answer_content, isCorrect, questionId)
values ('PRJ321_Question_1_0', '', 0, 'PRJ321_Question_1'),
('PRJ321_Question_1_1', '1', 0, 'PRJ321_Question_1'),
('PRJ321_Question_1_2', '2', 1, 'PRJ321_Question_1'),
('PRJ321_Question_1_3', '3', 0, 'PRJ321_Question_1'),
('PRJ321_Question_1_4', '4', 0, 'PRJ321_Question_1'),
('PRJ321_Question_2_0', '', 0, 'PRJ321_Question_2'),
('PRJ321_Question_2_1', '1', 0, 'PRJ321_Question_2'),
('PRJ321_Question_2_2', '2', 1, 'PRJ321_Question_2'),
('PRJ321_Question_2_3', '3', 0, 'PRJ321_Question_2'),
('PRJ321_Question_2_4', '4', 0, 'PRJ321_Question_2'),
('PRJ321_Question_3_0', '', 0, 'PRJ321_Question_3'),
('PRJ321_Question_3_1', '1', 0, 'PRJ321_Question_3'),
('PRJ321_Question_3_2', '2', 1, 'PRJ321_Question_3'),
('PRJ321_Question_3_3', '3', 0, 'PRJ321_Question_3'),
('PRJ321_Question_3_4', '4', 0, 'PRJ321_Question_3'),
('PRJ321_Question_4_0', '', 0, 'PRJ321_Question_4'),
('PRJ321_Question_4_1', '1', 0, 'PRJ321_Question_4'),
('PRJ321_Question_4_2', '2', 1, 'PRJ321_Question_4'),
('PRJ321_Question_4_3', '3', 0, 'PRJ321_Question_4'),
('PRJ321_Question_4_4', '4', 0, 'PRJ321_Question_4'),
('PRJ321_Question_5_0', '', 0, 'PRJ321_Question_5'),
('PRJ321_Question_5_1', '1', 0, 'PRJ321_Question_5'),
('PRJ321_Question_5_2', '2', 1, 'PRJ321_Question_5'),
('PRJ321_Question_5_3', '3', 0, 'PRJ321_Question_5'),
('PRJ321_Question_5_4', '4', 0, 'PRJ321_Question_5'),
('PRJ321_Question_6_0', '', 0, 'PRJ321_Question_6'),
('PRJ321_Question_6_1', '1', 0, 'PRJ321_Question_6'),
('PRJ321_Question_6_2', '2', 1, 'PRJ321_Question_6'),
('PRJ321_Question_6_3', '3', 0, 'PRJ321_Question_6'),
('PRJ321_Question_6_4', '4', 0, 'PRJ321_Question_6'),
('PRJ321_Question_7_0', '', 0, 'PRJ321_Question_7'),
('PRJ321_Question_7_1', '1', 0, 'PRJ321_Question_7'),
('PRJ321_Question_7_2', '2', 1, 'PRJ321_Question_7'),
('PRJ321_Question_7_3', '3', 0, 'PRJ321_Question_7'),
('PRJ321_Question_7_4', '4', 0, 'PRJ321_Question_7'),
('PRJ321_Question_8_0', '', 0, 'PRJ321_Question_8'),
('PRJ321_Question_8_1', '1', 0, 'PRJ321_Question_8'),
('PRJ321_Question_8_2', '2', 1, 'PRJ321_Question_8'),
('PRJ321_Question_8_3', '3', 0, 'PRJ321_Question_8'),
('PRJ321_Question_8_4', '4', 0, 'PRJ321_Question_8'),
('PRJ321_Question_9_0', '', 0, 'PRJ321_Question_9'),
('PRJ321_Question_9_1', '1', 0, 'PRJ321_Question_9'),
('PRJ321_Question_9_2', '2', 1, 'PRJ321_Question_9'),
('PRJ321_Question_9_3', '3', 0, 'PRJ321_Question_9'),
('PRJ321_Question_9_4', '4', 0, 'PRJ321_Question_9'),
('PRJ321_Question_10_0', '', 0, 'PRJ321_Question_10'),
('PRJ321_Question_10_1', '1', 0, 'PRJ321_Question_10'),
('PRJ321_Question_10_2', '2', 1, 'PRJ321_Question_10'),
('PRJ321_Question_10_3', '3', 0, 'PRJ321_Question_10'),
('PRJ321_Question_10_4', '4', 0, 'PRJ321_Question_10'),
('PRJ321_Question_11_0', '', 0, 'PRJ321_Question_11'),
('PRJ321_Question_11_1', '1', 0, 'PRJ321_Question_11'),
('PRJ321_Question_11_2', '2', 1, 'PRJ321_Question_11'),
('PRJ321_Question_11_3', '3', 0, 'PRJ321_Question_11'),
('PRJ321_Question_11_4', '4', 0, 'PRJ321_Question_11'),
('PRJ321_Question_12_0', '', 0, 'PRJ321_Question_12'),
('PRJ321_Question_12_1', '1', 0, 'PRJ321_Question_12'),
('PRJ321_Question_12_2', '2', 1, 'PRJ321_Question_12'),
('PRJ321_Question_12_3', '3', 0, 'PRJ321_Question_12'),
('PRJ321_Question_12_4', '4', 0, 'PRJ321_Question_12'),
('PRJ321_Question_13_0', '', 0, 'PRJ321_Question_13'),
('PRJ321_Question_13_1', '1', 0, 'PRJ321_Question_13'),
('PRJ321_Question_13_2', '2', 1, 'PRJ321_Question_13'),
('PRJ321_Question_13_3', '3', 0, 'PRJ321_Question_13'),
('PRJ321_Question_13_4', '4', 0, 'PRJ321_Question_13'),
('PRJ321_Question_14_0', '', 0, 'PRJ321_Question_14'),
('PRJ321_Question_14_1', '1', 0, 'PRJ321_Question_14'),
('PRJ321_Question_14_2', '2', 1, 'PRJ321_Question_14'),
('PRJ321_Question_14_3', '3', 0, 'PRJ321_Question_14'),
('PRJ321_Question_14_4', '4', 0, 'PRJ321_Question_14'),
('PRJ321_Question_15_0', '', 0, 'PRJ321_Question_15'),
('PRJ321_Question_15_1', '1', 0, 'PRJ321_Question_15'),
('PRJ321_Question_15_2', '2', 1, 'PRJ321_Question_15'),
('PRJ321_Question_15_3', '3', 0, 'PRJ321_Question_15'),
('PRJ321_Question_15_4', '4', 0, 'PRJ321_Question_15'),
('PRN292_Question_1_0', '', 0, 'PRN292_Question_1'),
('PRN292_Question_1_1', '1', 0, 'PRN292_Question_1'),
('PRN292_Question_1_2', '2', 1, 'PRN292_Question_1'),
('PRN292_Question_1_3', '3', 0, 'PRN292_Question_1'),
('PRN292_Question_1_4', '4', 0, 'PRN292_Question_1'),
('PRN292_Question_2_0', '', 0, 'PRN292_Question_2'),
('PRN292_Question_2_1', '1', 0, 'PRN292_Question_2'),
('PRN292_Question_2_2', '2', 1, 'PRN292_Question_2'),
('PRN292_Question_2_3', '3', 0, 'PRN292_Question_2'),
('PRN292_Question_2_4', '4', 0, 'PRN292_Question_2'),
('PRN292_Question_3_0', '', 0, 'PRN292_Question_3'),
('PRN292_Question_3_1', '1', 0, 'PRN292_Question_3'),
('PRN292_Question_3_2', '2', 1, 'PRN292_Question_3'),
('PRN292_Question_3_3', '3', 0, 'PRN292_Question_3'),
('PRN292_Question_3_4', '4', 0, 'PRN292_Question_3'),
('PRN292_Question_4_0', '', 0, 'PRN292_Question_4'),
('PRN292_Question_4_1', '1', 0, 'PRN292_Question_4'),
('PRN292_Question_4_2', '2', 1, 'PRN292_Question_4'),
('PRN292_Question_4_3', '3', 0, 'PRN292_Question_4'),
('PRN292_Question_4_4', '4', 0, 'PRN292_Question_4'),
('PRN292_Question_5_0', '', 0, 'PRN292_Question_5'),
('PRN292_Question_5_1', '1', 0, 'PRN292_Question_5'),
('PRN292_Question_5_2', '2', 1, 'PRN292_Question_5'),
('PRN292_Question_5_3', '3', 0, 'PRN292_Question_5'),
('PRN292_Question_5_4', '4', 0, 'PRN292_Question_5'),
('PRN292_Question_6_0', '', 0, 'PRN292_Question_6'),
('PRN292_Question_6_1', '1', 0, 'PRN292_Question_6'),
('PRN292_Question_6_2', '2', 1, 'PRN292_Question_6'),
('PRN292_Question_6_3', '3', 0, 'PRN292_Question_6'),
('PRN292_Question_6_4', '4', 0, 'PRN292_Question_6'),
('PRN292_Question_7_0', '', 0, 'PRN292_Question_7'),
('PRN292_Question_7_1', '1', 0, 'PRN292_Question_7'),
('PRN292_Question_7_2', '2', 1, 'PRN292_Question_7'),
('PRN292_Question_7_3', '3', 0, 'PRN292_Question_7'),
('PRN292_Question_7_4', '4', 0, 'PRN292_Question_7'),
('PRN292_Question_8_0', '', 0, 'PRN292_Question_8'),
('PRN292_Question_8_1', '1', 0, 'PRN292_Question_8'),
('PRN292_Question_8_2', '2', 1, 'PRN292_Question_8'),
('PRN292_Question_8_3', '3', 0, 'PRN292_Question_8'),
('PRN292_Question_8_4', '4', 0, 'PRN292_Question_8'),
('PRN292_Question_9_0', '', 0, 'PRN292_Question_9'),
('PRN292_Question_9_1', '1', 0, 'PRN292_Question_9'),
('PRN292_Question_9_2', '2', 1, 'PRN292_Question_9'),
('PRN292_Question_9_3', '3', 0, 'PRN292_Question_9'),
('PRN292_Question_9_4', '4', 0, 'PRN292_Question_9'),
('PRN292_Question_10_0', '', 0, 'PRN292_Question_10'),
('PRN292_Question_10_1', '1', 0, 'PRN292_Question_10'),
('PRN292_Question_10_2', '2', 1, 'PRN292_Question_10'),
('PRN292_Question_10_3', '3', 0, 'PRN292_Question_10'),
('PRN292_Question_10_4', '4', 0, 'PRN292_Question_10'),
('PRN292_Question_11_0', '', 0, 'PRN292_Question_11'),
('PRN292_Question_11_1', '1', 0, 'PRN292_Question_11'),
('PRN292_Question_11_2', '2', 1, 'PRN292_Question_11'),
('PRN292_Question_11_3', '3', 0, 'PRN292_Question_11'),
('PRN292_Question_11_4', '4', 0, 'PRN292_Question_11'),
('PRN292_Question_12_0', '', 0, 'PRN292_Question_12'),
('PRN292_Question_12_1', '1', 0, 'PRN292_Question_12'),
('PRN292_Question_12_2', '2', 1, 'PRN292_Question_12'),
('PRN292_Question_12_3', '3', 0, 'PRN292_Question_12'),
('PRN292_Question_12_4', '4', 0, 'PRN292_Question_12'),
('PRN292_Question_13_0', '', 0, 'PRN292_Question_13'),
('PRN292_Question_13_1', '1', 0, 'PRN292_Question_13'),
('PRN292_Question_13_2', '2', 1, 'PRN292_Question_13'),
('PRN292_Question_13_3', '3', 0, 'PRN292_Question_13'),
('PRN292_Question_13_4', '4', 0, 'PRN292_Question_13'),
('PRN292_Question_14_0', '', 0, 'PRN292_Question_14'),
('PRN292_Question_14_1', '1', 0, 'PRN292_Question_14'),
('PRN292_Question_14_2', '2', 1, 'PRN292_Question_14'),
('PRN292_Question_14_3', '3', 0, 'PRN292_Question_14'),
('PRN292_Question_14_4', '4', 0, 'PRN292_Question_14'),
('PRN292_Question_15_0', '', 0, 'PRN292_Question_15'),
('PRN292_Question_15_1', '1', 0, 'PRN292_Question_15'),
('PRN292_Question_15_2', '2', 1, 'PRN292_Question_15'),
('PRN292_Question_15_3', '3', 0, 'PRN292_Question_15'),
('PRN292_Question_15_4', '4', 0, 'PRN292_Question_15'),
('PRJ311_Question_1_0', '', 0, 'PRJ311_Question_1'),
('PRJ311_Question_1_1', '1', 0, 'PRJ311_Question_1'),
('PRJ311_Question_1_2', '2', 1, 'PRJ311_Question_1'),
('PRJ311_Question_1_3', '3', 0, 'PRJ311_Question_1'),
('PRJ311_Question_1_4', '4', 0, 'PRJ311_Question_1'),
('PRJ311_Question_2_0', '', 0, 'PRJ311_Question_2'),
('PRJ311_Question_2_1', '1', 0, 'PRJ311_Question_2'),
('PRJ311_Question_2_2', '2', 1, 'PRJ311_Question_2'),
('PRJ311_Question_2_3', '3', 0, 'PRJ311_Question_2'),
('PRJ311_Question_2_4', '4', 0, 'PRJ311_Question_2'),
('PRJ311_Question_3_0', '', 0, 'PRJ311_Question_3'),
('PRJ311_Question_3_1', '1', 0, 'PRJ311_Question_3'),
('PRJ311_Question_3_2', '2', 1, 'PRJ311_Question_3'),
('PRJ311_Question_3_3', '3', 0, 'PRJ311_Question_3'),
('PRJ311_Question_3_4', '4', 0, 'PRJ311_Question_3'),
('PRJ311_Question_4_0', '', 0, 'PRJ311_Question_4'),
('PRJ311_Question_4_1', '1', 0, 'PRJ311_Question_4'),
('PRJ311_Question_4_2', '2', 1, 'PRJ311_Question_4'),
('PRJ311_Question_4_3', '3', 0, 'PRJ311_Question_4'),
('PRJ311_Question_4_4', '4', 0, 'PRJ311_Question_4'),
('PRJ311_Question_5_0', '', 0, 'PRJ311_Question_5'),
('PRJ311_Question_5_1', '1', 0, 'PRJ311_Question_5'),
('PRJ311_Question_5_2', '2', 1, 'PRJ311_Question_5'),
('PRJ311_Question_5_3', '3', 0, 'PRJ311_Question_5'),
('PRJ311_Question_5_4', '4', 0, 'PRJ311_Question_5'),
('PRJ311_Question_6_0', '', 0, 'PRJ311_Question_6'),
('PRJ311_Question_6_1', '1', 0, 'PRJ311_Question_6'),
('PRJ311_Question_6_2', '2', 1, 'PRJ311_Question_6'),
('PRJ311_Question_6_3', '3', 0, 'PRJ311_Question_6'),
('PRJ311_Question_6_4', '4', 0, 'PRJ311_Question_6'),
('PRJ311_Question_7_0', '', 0, 'PRJ311_Question_7'),
('PRJ311_Question_7_1', '1', 0, 'PRJ311_Question_7'),
('PRJ311_Question_7_2', '2', 1, 'PRJ311_Question_7'),
('PRJ311_Question_7_3', '3', 0, 'PRJ311_Question_7'),
('PRJ311_Question_7_4', '4', 0, 'PRJ311_Question_7'),
('PRJ311_Question_8_0', '', 0, 'PRJ311_Question_8'),
('PRJ311_Question_8_1', '1', 0, 'PRJ311_Question_8'),
('PRJ311_Question_8_2', '2', 1, 'PRJ311_Question_8'),
('PRJ311_Question_8_3', '3', 0, 'PRJ311_Question_8'),
('PRJ311_Question_8_4', '4', 0, 'PRJ311_Question_8'),
('PRJ311_Question_9_0', '', 0, 'PRJ311_Question_9'),
('PRJ311_Question_9_1', '1', 0, 'PRJ311_Question_9'),
('PRJ311_Question_9_2', '2', 1, 'PRJ311_Question_9'),
('PRJ311_Question_9_3', '3', 0, 'PRJ311_Question_9'),
('PRJ311_Question_9_4', '4', 0, 'PRJ311_Question_9'),
('PRJ311_Question_10_0', '', 0, 'PRJ311_Question_10'),
('PRJ311_Question_10_1', '1', 0, 'PRJ311_Question_10'),
('PRJ311_Question_10_2', '2', 1, 'PRJ311_Question_10'),
('PRJ311_Question_10_3', '3', 0, 'PRJ311_Question_10'),
('PRJ311_Question_10_4', '4', 0, 'PRJ311_Question_10'),
('PRJ311_Question_11_0', '', 0, 'PRJ311_Question_11'),
('PRJ311_Question_11_1', '1', 0, 'PRJ311_Question_11'),
('PRJ311_Question_11_2', '2', 1, 'PRJ311_Question_11'),
('PRJ311_Question_11_3', '3', 0, 'PRJ311_Question_11'),
('PRJ311_Question_11_4', '4', 0, 'PRJ311_Question_11'),
('PRJ311_Question_12_0', '', 0, 'PRJ311_Question_12'),
('PRJ311_Question_12_1', '1', 0, 'PRJ311_Question_12'),
('PRJ311_Question_12_2', '2', 1, 'PRJ311_Question_12'),
('PRJ311_Question_12_3', '3', 0, 'PRJ311_Question_12'),
('PRJ311_Question_12_4', '4', 0, 'PRJ311_Question_12'),
('PRJ311_Question_13_0', '', 0, 'PRJ311_Question_13'),
('PRJ311_Question_13_1', '1', 0, 'PRJ311_Question_13'),
('PRJ311_Question_13_2', '2', 1, 'PRJ311_Question_13'),
('PRJ311_Question_13_3', '3', 0, 'PRJ311_Question_13'),
('PRJ311_Question_13_4', '4', 0, 'PRJ311_Question_13'),
('PRJ311_Question_14_0', '', 0, 'PRJ311_Question_14'),
('PRJ311_Question_14_1', '1', 0, 'PRJ311_Question_14'),
('PRJ311_Question_14_2', '2', 1, 'PRJ311_Question_14'),
('PRJ311_Question_14_3', '3', 0, 'PRJ311_Question_14'),
('PRJ311_Question_14_4', '4', 0, 'PRJ311_Question_14'),
('PRJ311_Question_15_0', '', 0, 'PRJ311_Question_15'),
('PRJ311_Question_15_1', '1', 0, 'PRJ311_Question_15'),
('PRJ311_Question_15_2', '2', 1, 'PRJ311_Question_15'),
('PRJ311_Question_15_3', '3', 0, 'PRJ311_Question_15'),
('PRJ311_Question_15_4', '4', 0, 'PRJ311_Question_15')
